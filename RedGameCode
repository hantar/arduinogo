#include <Adafruit_NeoPixel.h>
#define PIN 6 //marked D1 on GEMMA

Adafruit_NeoPixel strip = Adafruit_NeoPixel(16, PIN, NEO_GRB + NEO_KHZ800);

int blueScore[16];
int redScore[16];

int sine[] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15}; //these are the pixels in order of animation-- 36 pixels in total
int button = 9;
int lightButton = 0;
int lightot = 0;
int test = 0;

bool gameOn = false;

int numComparison = 0;

void setup() {
  pinMode(10, OUTPUT);
  Serial.begin(9600);
  strip.begin();
  strip.setBrightness(50); //adjust brightness here
  strip.show(); // Initialize all pixels to 'off'
  pinMode(9, INPUT);

}




void loop() {
  if (Serial.available() > 0) {
    digitalWrite(10, HIGH);
    delay(3000);
    if (Serial.read() == 'D') {
      gameOn = true;
    }
    while (gameOn == true) {
      redRun();
    }
  }
}// end void loop





void redRun() {
  for (int i = lightot; i <= lightot + 2; ++i) {
    strip.setPixelColor(sine[i], strip.Color(250, 0, 0));
    noColor(i);
    arraycomp(i);
    blueArrayComp(i);
    lightot += 1;

    if (digitalRead(9) == HIGH) {
      strip.setPixelColor(sine[i], strip.Color(250, 50, 50));
      Serial.println('R');
      redScore[i] = 1;
      blueScore[i] = 0;
      delay(10);
      while (digitalRead(9) == HIGH) {
        Serial.println('S');
        }
      }// end if for button push

    if (Serial.read() == 'B') {
      strip.setPixelColor(sine[i], strip.Color(0, 0, 250));
      Serial.println(i);
      blueScore[i] = 1;
      redScore[i] = 0;
      delay(10);
    }

    if (lightot == 16) {
      lightot = 0;
    } // end lightot if
  } // end main for loop
}// end for Red Void


void arraycomp(int i) {
  for (int i = 0; i <= 16; ++i) {
    if (redScore[i] == 1) {
      strip.setPixelColor(sine[i], strip.Color(250, 50, 50));
    } // end for if statement
  } // end for for loop
} // end for void arraycomp

void blueArrayComp(int i) {

  for (int i = 0; i <= 16; ++i) {
    if (blueScore[i] == 1) {
      strip.setPixelColor(sine[i], strip.Color(0, 0, 250));
    } // end for if statement
  } // end for for loop

}

void noColor(int i) {

  strip.setPixelColor(sine[i - 1], strip.Color(0, 0, 0));
  delay(300); // controls how slow the light moves in a circle
  strip.show();

}
